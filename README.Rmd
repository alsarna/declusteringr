---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# declusteringr

<!-- badges: start -->
<!-- badges: end -->

The goal of declusteringr is to declustering spatial data. This package offers support for `sf` spatial objects.

## Installation

You can install the released version of declusteringr from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("declusteringr")
```

## Examples

This is a basic example of cell declustering:

```{r example}
library(declusteringr)

x = gridWeighted(spatial_object = sf::st_read("inst/points/punkty4.shp"), cellsize = 0.09)
```
Plot input data and weighted points:
```{r}
par(mfrow=c(1,2))
plot(x$geometry)
plot(x$geometry, col = unlist(x$received_weights))
```

`gridWeighted` is adding columns row.id - the cell's number, col.id - the point's number, received_weights - the weight of each cell and lengths - amounts of each points in cell. `gridWeighted` does not change amount of features.
Weights are calculated according to this pattern:

$$ {w}'_j = \frac{\frac{1}{n_i}}{number\;of\;cells\;with\;data}\cdot n $$

where $ n_i $ is the number of samples in the cell in which sample $ j $ is located and $ n $ is the total number cells
with samples.

This is basic example of random declustering:

```{r}
y = gridRandom(spatial_object = sf::st_read('inst/points/punkty4.shp'), cellsize = 0.09 , numpoint = 2)
```

Plot input data and data after random declustering:

```{r}
par(mfrow=c(1,2))
plot(x$geometry)
plot(y)
```

`gridRandom` is choosing random features by specifying some parameters. `gridRandom` can change amount of features.
